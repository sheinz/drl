<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Drl by sheinz</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Drl</h1>
      <h2 class="project-tagline">Daytime running lamp controller</h2>
      <a href="https://github.com/sheinz/drl" class="btn">View on GitHub</a>
      <a href="https://github.com/sheinz/drl/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sheinz/drl/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="drl" class="anchor" href="#drl" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>drl</h1>

<p>Daytime running lamp controller. Use standard high beam lamps with reduced power to implemen daytime running lamps.
The controller is implemented using ATMEL ATTiny13A microcontroller.
It uses PWM to control lamp brightness. </p>

<p><img src="https://raw.github.com/sheinz/drl/master/doc/drl_4.jpg" alt="screenshot"></p>

<p><strong>Features:</strong></p>

<ul>
<li>Use PWM to control hi beam lamp power.</li>
<li>Automatically turns on after engine is started. Detects voltage increase to determine if engine is running.</li>
<li>Automatically turns off when low beam lamps is on.</li>
<li>Provides DRL brightness configuration by clicking a switch. Each click slightly increases brightness.</li>
<li>The brightness of the DRL is stored in EEPROM. </li>
<li>Can be completely disabled by configurin brightness that equal zero.</li>
<li>If a device is malfunctioning it records errors and blinks hi beam lamps at start. </li>
<li>The error count is cleared after clicking a switch.</li>
</ul>

<p><strong>Build</strong></p>

<p>In order to build the source code the following packages should be installed:</p>

<pre><code>sudo apt-get install gcc-avr
sudo apt-get install avr-libc
sudo apt-get install cmake
</code></pre>

<p>If you encounter errors like these:</p>

<pre><code>ld: crttn13a.o: No such file: No such file or directory
undefined reference to `__eerd_byte_tn13a'
</code></pre>

<p>Copy libraries crttn13a.o and libc.a into tiny-stack subdirectory:</p>

<pre><code>sudo cp /usr/lib/avr/lib/avr25/crttn13a.o /usr/lib/avr/lib/avr25/tiny-stack/
sudo cp /usr/lib/avr/lib/avr25/libc.a /usr/lib/avr/lib/avr25/tiny-stack/
</code></pre>

<p>To build and upload the firmware:</p>

<pre><code>mkdir drl-build
cd drl-build
cmake ../drl
make
make upload
</code></pre>

<hr>

<p><img src="https://raw.github.com/sheinz/drl/master/doc/drl_1.jpg" alt="screenshot"></p>

<p><img src="https://raw.github.com/sheinz/drl/master/doc/drl_3.jpg" alt="screenshot"></p>

<p><img src="https://raw.github.com/sheinz/drl/master/doc/schematic.png" alt="screenshot"></p>

<p><img src="https://raw.github.com/sheinz/drl/master/doc/pcb.png" alt="screenshot"></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sheinz/drl">Drl</a> is maintained by <a href="https://github.com/sheinz">sheinz</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
